"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9546],{39137:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CoralCommentsLink_entryRevision",selections:[{args:null,kind:"FragmentSpread",name:"CoralCountContainer_entryRevision"}],type:"EntryRevision",abstractKey:"__isEntryRevision"};r.hash="b00e2ef5bce7a70af1242accd055b4bf",n.default=r},53852:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EntryRailComponents_entryRevision",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"railComponents",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:"entryRailNewsletter",args:null,concreteType:"Newsletter",kind:"LinkedField",name:"newsletter",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null}],type:"EntryRailNewsletter",abstractKey:null}],storageKey:null}],type:"Entry",abstractKey:null}],type:"EntryRevision",abstractKey:"__isEntryRevision"};r.hash="eca24fff866e5c137e095f43992de426",n.default=r},46249:function(e,n,t){var r=t(97458),a=t(28934),o=t(61198);t(13700);var i=t(44359),l=t(11098),s=t(20672);n.Z=function(e){var n=(0,o.useFragment)(t(53852),e.entryRevision).railComponents;return n?(0,r.jsx)("aside",{className:(0,a.Z)("sticky top-90 pb-40",s.Z.EntryRailComponents),children:n.map(function(e,n){if(!e||!("EntryRailNewsletter"===e.__typename&&(0,l.hb)(e.entryRailNewsletter.slug)))return null;var t=l.ZP[e.entryRailNewsletter.slug];return(0,r.jsx)("div",{className:"mb-8 hidden md:block",children:(0,r.jsx)(i.Z,{name:t.name,text:t.text,lists:[t.listId],source:"sidebar",colorTheme:"light"})},n)})}):null}},1182:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(97458),a=t(28934),o=t(20672),i=function(e){var n=e.className;return(0,r.jsxs)("p",{className:(0,a.Z)(o.Z.Disclaimer,"mb-24 border-t pt-8 font-polysans text-12 italic leading-120 tracking-2 lg:mb-0",n),children:["If you buy something from a Verge link, Vox Media may earn a commission."," ",(0,r.jsx)("a",{className:"font-medium text-black underline",href:"https://www.theverge.com/ethics-statement",children:"See our ethics statement."})]})}},97959:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(29145),a=t(97458),o=t(52983),i=t(61198),l=t(28934),s=t(20672),c={black:{textColor:"text-black"},white:{textColor:"text-white"},blurple:{textColor:"text-blurple"}},u=function(e){var n=e.href,t=e.onClick,r=e.onMouseEnter,o=e.children,i=e.color,u=c[void 0===i?"black":i];return(0,a.jsx)(n?"a":"button",{href:n,title:"Go to comments",onClick:t,onMouseEnter:r,className:(0,l.Z)(s.Z.CommentsLink,"text-0 inline-block text-16 md:inline"),children:(0,a.jsx)("span",{className:(0,l.Z)("inline-block h-18 align-text-bottom font-polysans text-12 font-medium leading-[18px]",u.textColor),children:o||"Comments"})})},d=t(36935),m=t(30530),f=t(37782),h=t(13359),g=(0,f.n)(function(e){var n=e.color,l=(0,r._)(e,["color"]),s=(0,i.useFragment)(t(39137),l.entryRevision),c=(0,o.useContext)(h.Z),f=(0,d.z$)(),g=(0,o.useCallback)(function(){f&&f.emit({event:"coral_comment",coral_comment:{action:"drawer_open_lead"}}),c.openDrawer()},[f,c]);return(0,a.jsx)(u,{color:void 0===n?"black":n,onClick:g,onMouseEnter:c.prerenderDrawer,children:(0,a.jsx)(m.Z,{entryRevision:s})})},{context:"CoralCommentsLinkErrorBoundary"})},13359:function(e,n,t){var r=t(52983).createContext({isDrawerOpen:!1,isDrawerPrerendered:!1,openDrawer:function(){},closeDrawer:function(){},prerenderDrawer:function(){}});n.Z=r},30327:function(e,n,t){var r=t(52983);n.Z=function(e){(0,r.useEffect)(function(){var n=document.querySelector(e),t=new MutationObserver(function(e){e.forEach(function(e){if("attributes"===e.type&&e.target instanceof HTMLElement){var n=e.target.getAttribute("data-coral-count"),t=e.target.getAttribute("data-coral-new-count"),r=n?parseInt(n):0,a=t?parseInt(t):0,o=Intl.NumberFormat("en",{notation:"compact"});if(r>999){var i=e.target.firstElementChild;null!==i&&i instanceof HTMLElement&&(i.innerText=o.format(r))}if(a>999){var l=e.target.getElementsByClassName("coral-new-count-number")[0];l instanceof HTMLElement&&(l.innerText=o.format(a))}}})});return n instanceof HTMLElement&&t.observe(n,{attributes:!0,attributeFilter:["data-coral-count","data-coral-new-count"],childList:!0,subtree:!0}),function(){t.disconnect()}})}},65675:function(e,n,t){t.r(n);let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CoralLoader_entryRevision",selections:[{alias:null,args:null,kind:"ScalarField",name:"uuid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"legacyId",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Entry",abstractKey:null}],type:"EntryRevision",abstractKey:"__isEntryRevision"};r.hash="f44aec0db055b96a9656709711d12471",n.default=r},92849:function(e,n,t){var r=t(29565),a=t(9326),o=t(97458);n.Z=()=>{let e=null,{coralConfig:n}=(0,a.q)();if(!n)throw Error("missing coral config");let t=(0,r.aC)();if(!t||!t.viewer)return null;let i=t.viewer;return("BANNED"===i.status||"BANNED"===i.communityMembershipStatus?e=(0,o.jsxs)(o.Fragment,{children:["Your commenting account has been frozen, please contact"," ",(0,o.jsx)("a",{className:"shadow-underline-blurple",href:`mailto:${n.moderationEmail}`,children:n.moderationEmail})," ","for more information."]}):null===i.email?e=(0,o.jsxs)(o.Fragment,{children:["You're signed in, but you must"," ",(0,o.jsx)("a",{className:"shadow-underline-blurple",href:`/users/${encodeURIComponent(i.username)}/account`,children:"provide and verify your email address"})," ","before you can use the new commenting experience. If you have already provided and verified your email, please allow a couple of minutes for the changes to take effect and"," ",(0,o.jsx)("button",{className:"shadow-underline-blurple",onClick:()=>location.reload(),children:"reload the page"}),"."]}):i.emailVerified||(e=(0,o.jsxs)(o.Fragment,{children:["You're signed in, but you must"," ",(0,o.jsx)("a",{className:"shadow-underline-blurple",href:"/resend_confirmation",children:"verify your email address"})," ","before you can use the new commenting experience. If you have already verified your email, please allow a couple of minutes for the changes to take effect and"," ",(0,o.jsx)("button",{className:"shadow-underline-blurple",onClick:()=>location.reload(),children:"reload the page"}),"."]})),e)?(0,o.jsx)("div",{className:"mx-20 mt-60 bg-blurple/10 p-12 font-polysans text-14 font-light leading-120 text-blurple",children:e}):null}},71160:function(e,n,t){t.d(n,{Z:function(){return v}});var r,a=t(67914),o=t(56503),i=t.n(o),l=t(52983),s=t(61198);t(13700);var c=t(36935),u=t(29565),d=t(9326),m=t(46042),f=t(37782),h=t(87514);let g={"createComment.success":"comment","createCommentReply.success":"comment","editComment.success":"edit","reportComment.success":"report","createCommentReaction.success":"respect",showSharePopover:"share",setCommentsOrderBy:"set_sort_order",unmarkAll:"unmark_unread",jumpToNextUnseenComment:"z_key_next",setProfileTab:"set_profile_tab","ignoreUser.success":"ignore_user",copyPermalink:"copy_permalink"};class p{events=null;constructor(e){this.client=e}handleOnLoginPrompt=()=>{let e="EU"===(0,h.e)("_chorus_geoip_continent"),n=(0,h.e)("_chorus_privacy_consent");if(e&&!n)this.events?.emit("showGDPRConfirmation");else{this.client.emit({event:"authentication",authentication:{method:"sign in and join the conversation"}});let e=encodeURIComponent(window.location.pathname),n=`/api/auth/login?redirectTo=${e}`;window.location.href=n}};handleOnAny=e=>{if(Array.isArray(e))return;let n=g[e];n&&this.client.emit({event:"coral_comment",coral_comment:{action:n}})};connect(e){this.events&&this.disconnect(),this.events=e,this.events.on("loginPrompt",this.handleOnLoginPrompt),this.events.onAny(this.handleOnAny)}disconnect(){this.events&&(this.events.off("loginPrompt",this.handleOnLoginPrompt),this.events.offAny(this.handleOnAny),this.events=null)}}var y=t(97458),v=(0,f.n)(e=>{let{entryRevision:n,domID:o,customScrollerID:f,streamRef:h}=e,g=(0,s.useFragment)((void 0!==r||(r=t(65675)).hash&&"f44aec0db055b96a9656709711d12471"!==r.hash&&console.error("The definition of 'CoralLoader_entryRevision' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),n),v=(0,u.aC)(),{coralConfig:b}=(0,d.q)();if(!b)throw Error("missing coral config");let[w,C]=(0,l.useState)(),[x,k]=(0,l.useState)(!1),_=(0,c.z$)(),E=(0,l.useCallback)(()=>{if(!window.Coral){!function(e,n,t=1e3){let r=0,a=()=>{let o=e();if(!o){r+=1;let e="number"==typeof t?t:t(r);if(!e)return;setTimeout(a,e);return}n(o)};a()}(()=>window.Coral,C);return}C(window.Coral)},[]),{appConfig:{deployEnv:R},communityConfig:{communityOrigin:N}}=(0,d.q)(),j=b.enableLegacyID&&g.legacyId?.toString()||g.uuid;return((0,l.useEffect)(()=>{if(!w||!v||!b.origin)return;let e=g.url;g.url&&"production"!==R&&"staging"!==R&&(e=g.url.replace(N,window.location.origin));let n=_?new p(_):null;return h.current=w.createStreamEmbed({id:o,rootURL:b.origin,storyID:j,storyURL:e,autoRender:!0,customCSSURL:"/_next/static/coral.d0d7f94f32c145a60805338e3e4a59a7.css".includes("://")?"/_next/static/coral.d0d7f94f32c145a60805338e3e4a59a7.css":`${location.origin}/_next/static/coral.d0d7f94f32c145a60805338e3e4a59a7.css`,events:e=>{n?.connect(e),e.on("showGDPRConfirmation",()=>{k(!0)})},accessToken:v.viewer?.coral,customScrollContainer:f?document.getElementById(f):null}),()=>{h.current&&(h.current.rendered?h.current.remove():(0,a.Tb)("Trying to remove Coral, while it was not rendered")),h.current=null,n?.disconnect()}},[_,v,g.url,j,w,o,h,f,N,b.origin,R]),b.origin)?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.Z,{isOpen:x,acceptCallback:()=>{let e=encodeURIComponent(window.location.pathname),n=`/api/auth/login?redirectTo=${e}`;window.location.href=n,_?.emit({event:"authentication",authentication:{method:"sign in and join the conversation"}}),k(!1)},declineCallback:()=>{k(!1)}}),(0,y.jsx)(i(),{src:`${b.origin}/assets/js/embed.js?v=${b.cacheFingerprint}`,onLoad:E,defer:!0})]}):null},{context:"CoralLoaderErrorBoundary"})}}]);